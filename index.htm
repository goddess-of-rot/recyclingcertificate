<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Certificate of Recycling</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <style>
    @page {
      size: A4 landscape;
      margin: 10mm;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: #fff;
      font-family: Arial, sans-serif;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }

    .page {
      page-orientation: right;
      width: 100%;
      max-width: 325mm;
      height: 100%;
      max-height: 275mm;
      scale: 104mm;
      margin: auto;
      padding: 30mm 20mm;
      background-image: url('BORDER.jpg');
      background-size: 100% 100%;
      background-repeat: no-repeat;
      background-position: center;
      box-sizing: border-box;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
      position: relative;
    }

    .title-box {
      border: 2px solid #333;
      padding: 4px 12px;
      font-size: 28px;
      text-transform: uppercase;
    }

    .rn-box {
      position: absolute;
      right: 0;
      top: 0;
      border: 2px solid #333;
      padding: 4px 8px;
      font-size: 12px;
    }

    .sub-row {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
      position: relative;
    }

    .subtitle-box {
      border: 2px solid #333;
      padding: 4px 10px;
      font-size: 14px;
      text-align: center;
    }

    .ref-label {
      position: absolute;
      left: 0;
      font-size: 12px;
      font-weight: bold;
    }

    .received {
      font-size: 12px;
      align-items: end;
    }

    .received .row {
      display: flex;
      margin-bottom: 8px;
      align-items: center;
    }

    .received .label {
      width: 180px;
      font-weight: bold;
      font-size: 12px;
      white-space: nowrap;
      margin-right: 6px;
    }

    .received .value {
      display: inline-flex;
      margin-left: auto;
      justify-content: flex-end;
      gap: 6px;
      font-size: 12px;
      padding: 3px 6px;
      min-height: 24px;
    }

    .outlined {
      border: 1px solid #333;
      padding: 3px 6px;
      display: inline-block;
    }

    .summary-heading {
      text-align: center;
      font-size: 14px;
      text-decoration: underline;
      margin: 12px 0;
    }

    .charts {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      gap: 10px;
    }

    .chart-box {
      width: 32%;
      text-align: center;
      font-size: 12px;
    }

    .chart-box canvas {
      width: 160px !important;
      height: 160px !important;
    }

    .chart-box .title {
      margin-top: 4px;
      line-height: 1.2;
    }

    .weee {
      font-size: 12px;
      line-height: 1.4;
      margin-bottom: 12px;
    }

    .bottom-row {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      margin-top: 30px;
    }

    .footer {
      text-align: center;
      font-size: 10px;
      border-top: 1px solid #666;
      padding-top: 6px;
      margin-top: 10px;
    }

    .bottom-row img {
      height: 60px;
    }

    .stamp-img {
      height: 70px;
    }

    .sign-img {
      height: 50px;
    }

    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        background: #fff !important;
      }

      .page {
        page-break-after: avoid;
        background-size: 100% 100% !important;
      }

      canvas {
        break-inside: avoid;
      }

      .charts {
        display: flex !important;
        flex-direction: row !important;
        justify-content: space-between !important;
      }

      .chart-box canvas {
        width: 160px !important;
        height: 160px !important;
      }

      a {
        text-decoration: none;
        color: black;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="title-box">Certificate of Recycling</div>
      <div class="rn-box">R/N: EQ0624KL040MF6040</div>
    </div>

    <div class="sub-row">
      <div class="ref-label" style="top: -15px;">Ref/No: EQ0624KL040MF6040</div>
      <div class="subtitle-box">
        This is to certify that the E‑Waste received was recycled environment‑friendly as mentioned below:
      </div>
    </div>

    <div class="received">
      <div class="row">
        <div class="label">Received From<strong>​:</strong>​</div>
        <div class="value">
          <span class="outlined">Deloitte Shared Services India LLP</span>
        </div>
      </div>
      <div class="row">
        <div class="label">Receiving Location <strong>​:</strong>​</div>
        <div class="value">
          <span class="outlined">
            9th Floor, Prestige TMS Square, NH66, Opp. Oberon Mall,<br>
            Edappally, Kochi 682024
          </span>
        </div>
      </div>
      <div class="row">
        <div class="label">Received During<strong>​:</strong>​</div>
        <div class="value">
          from <span class="outlined">03‑06‑2024</span> to <span class="outlined">03‑06‑2024</span>
        </div>
      </div>
      <div class="row">
        <div class="label">Received Weight/Qty<strong>​:</strong>​</div>
        <div class="value">
          <span class="outlined"><strong>kg</strong> 32.5</span>
          <span class="outlined"><strong>Qty.</strong> 13</span>
          <span class="outlined"><strong>Status:</strong> Destruction process completed successfully</span>
        </div>
      </div>
      <div class="row">
        <div class="label">Procedure Method<strong>​:</strong>​</div>
        <div class="value">
          ☒ Data Sanitization   ☑ Product Shred   ☑ Dismantling   ☑ Recycling   ☒ Refurbished
        </div>
      </div>
    </div>

    <div class="summary-heading">E‑Waste Recycling &amp; Data Sanitization Summary</div>

    <div class="charts">
      <div class="chart-box">
        <canvas id="chartProject"></canvas>
        <div class="title">During this Project:<br><strong>1.195&nbsp;MT E‑WASTE</strong></div>
      </div>
      <div class="chart-box">
        <canvas id="chartFY"></canvas>
        <div class="title">During this F.Y.:<br><strong>89.251&nbsp;MT E‑WASTE</strong></div>
      </div>
      <div class="chart-box">
        <canvas id="chartTotal"></canvas>
        <div class="title">Total Recycled As on Date:<br><strong>140.296&nbsp;MT E‑WASTE</strong></div>
      </div>
    </div>

    <div class="weee">
      The above‑mentioned WEEE has been received by Binbay Recycling Pvt. Ltd. and is recycled for maximum material recovery 
      and the Storage media has been sanitized according to the industry standards, local regulations and Pollution Control Board norms. 
      Binbay Recycling certifies that the processing of above material at our facility has not caused harm to health or the environment. 
      This certificate is for information and records only.
    </div>

    <div class="bottom-row">
      <img src="EPR.png" alt="EPR Logo">
      <img src="LiFE.png" alt="LiFE Logo">
      <img src="BARCODE.png" alt="Barcode">
      <div style="text-align: center;">
        <img src="STAMP.png" class="stamp-img" alt="Stamp"><br>
        Authorized Stamp / Seal
      </div>
      <div style="text-align: center;">
        <img src="SIGN.png" class="sign-img" alt="Signature"><br>
        Prepared and Signed by<br>
        <strong>Mr. Llewellyn D’Souza</strong><br>
        Employee ID: EC23007
      </div>
    </div>

    <div class="footer">
      Binbay Recycling Pvt. Ltd.&nbsp;|&nbsp;310, Sangeet Plaza, Marol Maroshi Road, Andheri (E), Mumbai&nbsp;–&nbsp;400059&nbsp;|&nbsp;
      CIN:&nbsp;U37100MH2016PTC288322&nbsp;|&nbsp;Reg.&nbsp;No:&nbsp;80/MPCB/RHQ/HT/CE/B-19040038&nbsp;|&nbsp;Mob:&nbsp;+91‑98190‑19091&nbsp;|&nbsp;www.binbay.com
    </div>
  </div>

  <script>
    const centerTextPlugin = {
      id: 'centerText',
      afterDraw(chart, args, options) {
        const { ctx, chartArea: { top, left, width, height } } = chart;
        ctx.save();
        ctx.font = options.font || 'bold 16px Arial';
        ctx.fillStyle = options.color || '#333';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(options.text, left + width / 2, top + height / 2);
      }
    };

    const baseOptions = {
      responsive: false,
      plugins: {
        legend: { display: false },
        tooltip: { enabled: true },
        datalabels: {
          color: '#000',
          font: { weight: 'bold', size: 10 },
          formatter: (value, ctx) => {
            const label = ctx.chart.data.labels[ctx.dataIndex];
            return `${label}\n${value} MT`;
          },
          anchor: 'end',
          align: 'start',
          offset: 40,
          clamp: false,
          backgroundColor: '#fff',
          borderColor: '#000',
          borderWidth: 1,
          borderRadius: 4,
          padding: 3
        }
      },
      cutout: '65%'
    };

    const allLabels = ['(ITEW)','(LSEEW)','(TLSEW)','(LIW)','(DSSBLEW)','(MDW)','(EETW)','(CEEW)'];
    const allColors = ['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF','#FF9F40','#66FF66','#FF6666'];

    function filterNonZero(labels, colors, values) {
      const filtered = values.map((v, i) => ({ label: labels[i], color: colors[i], value: v }))
                             .filter(item => item.value !== 0);
      return {
        labels: filtered.map(f => f.label),
        colors: filtered.map(f => f.color),
        values: filtered.map(f => f.value)
      };
    }

    const projectData = filterNonZero(allLabels, allColors, [0.0325, 0.1660, 0.1660, 0.1660, 0.1660, 0.1660, 0.1660, 0.1660]);
    const fyData = filterNonZero(allLabels, allColors, [11.5151,0.8940,0.0000,6.1188,0.0000,0.0000,12.9220,57.8016]);
    const totalData = filterNonZero(allLabels, allColors, [21.5951,1.4740,0.0000,9.8238,0.0000,0.0000,18.6360,88.7673]);

    new Chart(document.getElementById('chartProject'), {
      type: 'doughnut',
      data: {
        labels: projectData.labels,
        datasets: [{ data: projectData.values, backgroundColor: projectData.colors, borderWidth: 1 }]
      },
      options: {
        ...baseOptions,
        plugins: {
          ...baseOptions.plugins,
          centerText: { text: '1.195 MT E‑WASTE', font: 'bold 11px Arial', color: '#333' }
        }
      },
      plugins: [centerTextPlugin]
    });

    new Chart(document.getElementById('chartFY'), {
      type: 'doughnut',
      data: {
        labels: fyData.labels,
        datasets: [{ data: fyData.values, backgroundColor: fyData.colors, borderWidth: 1 }]
      },
      options: {
        ...baseOptions,
        plugins: {
          ...baseOptions.plugins,
          centerText: { text: '89.251 MT E‑WASTE', font: 'bold 11px Arial', color: '#333' }
        }
      },
      plugins: [centerTextPlugin]
    });

    new Chart(document.getElementById('chartTotal'), {
      type: 'doughnut',
      data: {
        labels: totalData.labels,
        datasets: [{ data: totalData.values, backgroundColor: totalData.colors, borderWidth: 1 }]
      },
      options: {
        ...baseOptions,
        plugins: {
          ...baseOptions.plugins,
          centerText: { text: '140.296 MT E‑WASTE', font: 'bold 10px Arial', color: '#333' }
        }
      },
      plugins: [centerTextPlugin]
    });
  </script>
</body>
</html>